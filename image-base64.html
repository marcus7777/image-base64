<link rel="import" href="../polymer/polymer.html">
<script src="../JavaScript-Load-Image/js/load-image.all.min.js"></script>
<!--
`<image-base64></image-base64>` resizing and convert images to base64
@demo demo.html
-->
<script>
  Polymer({
    is: "image-base64",
    properties: {
      url: {type:String, observer:"load"},
      width: {type: Number,value: 100},
      _width: {computed:"getWidth(width,minWidth)"},
      background: {type: String, value: "#FFF"},
      scalingUp: {value: false},
      base64: {notify: true},
      maxHeight: {type: Number,value: 300},
      maxWidth: {type: Number,value: 300},
      minHeight: {type: Number,value: 10},
      minWidth: {type: Number,value: 10},
      orientation: {value: 1},
      log: {
        type: Boolean,
        value: false
      },
    },
    getWidth: function(width,minWidth) {
      if (minWidth < 10) {
        minWidth = 10
      }
      if (width < minWidth) {
        return minWidth
      } else {
        return width
      }
    },
    load: function(url) {
      var that = this
      if (url) {
        loadImage( url,
          function (canvas) {
            that.base64 = canvas.toDataURL()
          },
          {  
            canvas: true,
            maxWidth: that.maxWidth,
          }
        )
      }
    }
  })
</script>
